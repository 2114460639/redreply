<html>
    <head>
        <meta charset="utf-8">
        <title>编辑脚本</title>
        <style>
        </style>
        <script>
            document.onready = function(){
                function print_log(s)
                {
                    try{
                        Window.share.mainthis.xcall("print_log",s);
                    }catch(err){
                        Window.this.modal(<info>{err}</info>);
                    } 
                }
                if(Window.share.is_edit){
                    document.$("#名字").value = Window.share.codes[Window.share.select_index]["name"];
                    document.$("#介绍").value = Window.share.codes[Window.share.select_index]["description"];
                    document.$("#关键词").value = Window.share.codes[Window.share.select_index]["content"]["关键词"];
                    document.$("#触发方式").value = Window.share.codes[Window.share.select_index]["content"]["触发方式"];
                    document.$("#匹配方式").value = Window.share.codes[Window.share.select_index]["content"]["匹配方式"];
                    document.$("#code").value = Window.share.codes[Window.share.select_index]["content"]["code"];
                }
                Window.this.on("close", ()=> {
                    let obj = 
                    {
                        "name":document.$("#名字").value,
                        "description":document.$("#介绍").value,
                        "content":{
                            "关键词":document.$("#关键词").value,
                            "触发方式":document.$("#触发方式").value,
                            "匹配方式":document.$("#匹配方式").value,
                            "code":document.$("#code").value,
                        }
                    }
                    if(Window.share.is_edit){
                        Window.share.codes[Window.share.select_index] = obj
                    }else{
                        Window.share.codes.push(obj)
                    }
                });
            };
            
        </script>
    </head>
    <body style="flow:vertical;width:1*;font-size: 18dip;">
        <div style="flow:horizontal;width:1*;">
            名字：&nbsp;&nbsp;&nbsp;&nbsp;<plaintext id="名字" style="height:36dip;width:1*;overflow: auto;">code_name</plaintext><a id="help_btn" target="@system" href="readme.html" style="height:36dip;">帮助</a>
        </div>
        <div style="flow:horizontal;width:1*;margin-top: 5dip;">
            介绍：&nbsp;&nbsp;&nbsp;&nbsp;<plaintext id="介绍" style="height:36dip;width:1*;overflow: auto;">code_description</plaintext>
        </div>
        <div style="flow:horizontal;width:1*;margin-top: 5dip;">
            关键词：&nbsp;<plaintext id="关键词" style="height:36dip;width:1*;overflow: auto;">222</plaintext>
        </div>
        <div style="width:1*;margin-top: 5dip;">
            匹配方式： 
            <select id="匹配方式" style="width:1*;">
                <option value="完全匹配">完全匹配</option>
                <option value="正则匹配">正则匹配</option>
                <option value="模糊匹配">模糊匹配</option>
                <option value="前缀匹配">前缀匹配</option>
            </select>
        </div>
        <div style="width:1*;margin-top: 5dip;">
            触发方式： 
            <select id="触发方式" style="width:1*;">
                <option value="群聊触发">群聊触发</option>
                <option value="私聊触发">私聊触发</option>
                <option value="群、私聊触发">群、私聊触发</option>
                <option value="事件触发">事件触发</option>
                <option value="框架初始化">框架初始化</option>
                <option value="频道触发">频道触发</option>
            </select>
        </div>
        <div class="tableclass" style="width:1*;height:1*;margin-top: 5dip;">
            <plaintext  id="code" style="background:rgba(255,255,255,1);width:1*;height:1*;">hello</plaintext>
        </div>
        
    </body>
</html>
